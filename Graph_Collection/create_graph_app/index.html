<!-- index.html creates the layout of the site -->
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>SAGE3 Graph Generator Project</title>
        <link rel="stylesheet" href="./style.css" type="text/css">
    </head>
    
    <body class="center">
        <!-- This is where the title and instructions will be displayed -->
        <div id="title_div">
            <h1>SAGE3 Graph Generator Test</h1>
            <br>
            <div id="subtitle_div">
                <p id="p">Select a csv file and press submit</p>
                <br>
                <div id="file_selector_div">
                    <form method="POST" action="/">
                        <input id ="file_selector" type="file" accept=".txt" name="file">
                        <button id="submit_button" onclick="onSubmit()">Submit</button>
                        <textarea cols="100" rows="25" placeholder="text will appear here" name="data"></textarea> 
                    </form>
                </div>
            </div>
        </div>
    </body>
    
    <script>
        var file
        const fileSelector = document.getElementById('file_selector')
        const textarea = document.querySelector('textarea')
        const reader = new FileReader()
    
        fileSelector.addEventListener('change', (event) => {
            const fileList = event.target.files;
            file = new Blob(fileList, {type: 'text/plain'})
            console.log(fileList);
            updateTextArea();
        });

        function updateTextArea(){
            textarea.value = "";
            reader.addEventListener('load', (e)=>{
                textarea.value = e.target.result
                data = e.target.result
            })
            reader.addEventListener('error', (e)=>{
                alert(e.target.error.name)
            })

            if(file){
                reader.readAsText(file)
            }
        }
        
        function onSubmit(){
    
        }
    </script>
</html>